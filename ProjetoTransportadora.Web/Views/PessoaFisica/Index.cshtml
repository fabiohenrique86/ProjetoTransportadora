@using ProjetoTransportadora.Dto;

@{
    ViewBag.Title = "Pessoas Físicas";

    UsuarioDto usuarioDto = null;
    if (Session[System.Configuration.ConfigurationManager.AppSettings["ProjetoTransportadora.Usuario"]] != null)
    {
        usuarioDto = (UsuarioDto)Session[System.Configuration.ConfigurationManager.AppSettings["ProjetoTransportadora.Usuario"]];
    }
}

@section styles
{
    <style type="text/css">
        .modal-lg {
            width: 95%;
        }

        .modal-md {
            width: 70%;
        }

        .modal-body {
            padding: 40px;
        }

        .ui-autocomplete {
            z-index: 2147483647;
        }
    </style>
}

@section scripts
{
    <script type="text/javascript">

        function habilitarModal(opcao) {
            if (opcao) {
                $("#modalPessoaFisica input, #modalPessoaFisica select, #modalPessoaFisica textarea").removeProp("disabled");
                $("i.glyphicon-remove").show();
                $(".input-group").removeProp("disabled");
                $(".input-group-addon").removeProp("disabled");
                $(".excluirAvalista").show();
            }
            else {
                $("#modalPessoaFisica input, #modalPessoaFisica select, #modalPessoaFisica textarea").prop("disabled", "disabled");
                $("i.glyphicon-remove").hide();
                $(".input-group").prop("disabled", "disabled");
                $(".input-group-addon").prop("disabled", "disabled");
                $(".excluirAvalista").hide();
            }
        }

        function limparFormulario() {

            $("#frmPessoaFisica").trigger("reset");

            $("#idPessoa").val("");
            $("#idPai").val("");
            $("#idMae").val("");
            $("#idConjuge").val("");
            $("#cepResidencia").val("");
            $("#valorAluguel").val("");
            $("#cpf").val("");
            $("#dataNascimento").val("");
            $("#dataAdmissao").val("");
            $("#valorSalario").val("");
            $("#dataReferenciaSalario").val("");

            $("#divAvalista").html("");
            $("#tbPessoaTelefone").DataTable().clear().draw();
            $("#tbPessoaEmail").DataTable().clear().draw();
            $("#tbPessoaHistorico").DataTable().clear().draw();
            $("#tbPessoaReferencia").DataTable().clear().draw();
            $("#tbPessoaContrato").DataTable().clear().draw();
        }

        function carregarAvalista(idAvalistaInput, avalistaDto) {

            var o = $("#" + idAvalistaInput).parent().parent().parent().parent().parent().parent();

            $(o).find("input[id^='nomePessoaCadastroAvalista']").val(avalistaDto.Nome);
            $(o).find("input[id^='cpfPessoaCadastroAvalista']").val(formatarCpf(avalistaDto.Cpf));
            $(o).find("input[id^='rgPessoaCadastroAvalista']").val(avalistaDto.Rg);

            if (avalistaDto.DataNascimento != null)
                $(o).find("input[id^='dataNascimentoPessoaCadastroAvalista']").val(moment(avalistaDto.DataNascimento).format("DD/MM/YYYY"));

            $(o).find("input[id^='cidadeNascimentoPessoaCadastroAvalista']").val(avalistaDto.CidadeNascimento);
            $(o).find("select[id^='ufNascimentoPessoaCadastroAvalista']").val(avalistaDto.UfNascimento);
            $(o).find("select[id^='estadoCivilPessoaCadastroAvalista']").val(avalistaDto.IdEstadoCivil);
            $(o).find("select[id^='regimeCasamentoPessoaCadastroAvalista']").val(avalistaDto.IdRegimeCasamento);

            if (avalistaDto.PessoaConjugeDto != null) {
                $(o).find("input[id^='conjugeAvalistaHidden']").val(avalistaDto.PessoaConjugeDto.Id);
                $(o).find("input[id^='conjugeAvalistaInput']").val(avalistaDto.PessoaConjugeDto.Nome);
            }

            if (avalistaDto.PessoaPaiDto != null) {
                $(o).find("input[id^='paiAvalistaHidden']").val(avalistaDto.PessoaPaiDto.Id);
                $(o).find("input[id^='paiAvalistaInput']").val(avalistaDto.PessoaPaiDto.Nome);
            }

            if (avalistaDto.PessoaMaeDto != null) {
                $(o).find("input[id^='maeAvalistaHidden']").val(avalistaDto.PessoaMaeDto.Id);
                $(o).find("input[id^='maeAvalistaInput']").val(avalistaDto.PessoaMaeDto.Nome);
            }

            $(o).find("input[id^='cepResidenciaPessoaCadastroAvalista']").val(avalistaDto.CepResidencia);
            $(o).find("input[id^='logradouroResidenciaPessoaCadastroAvalista']").val(avalistaDto.LogradouroResidencia);
            $(o).find("input[id^='numeroResidenciaPessoaCadastroAvalista']").val(avalistaDto.NumeroResidencia);
            $(o).find("input[id^='complementoResidenciaPessoaCadastroAvalista']").val(avalistaDto.ComplementoResidencia);
            $(o).find("input[id^='bairroResidenciaPessoaCadastroAvalista']").val(avalistaDto.BairroResidencia);
            $(o).find("input[id^='cidadeResidenciaPessoaCadastroAvalista']").val(avalistaDto.CidadeResidencia);
            $(o).find("select[id^='ufResidenciaPessoaCadastroAvalista']").val(avalistaDto.UfResidencia);
            $(o).find("select[id^='tipoResidenciaPessoaCadastroAvalista']").val(avalistaDto.IdTipoResidencia);

            if (avalistaDto.ValorAluguel != null)
                $(o).find("input[id^='valorAluguelPessoaCadastroAvalista']").val(Globalize.format(avalistaDto.ValorAluguel, "n2"));

            $(o).find("input[id^='tempoResidencialPessoaCadastroAvalista']").val(avalistaDto.TempoResidencial);
            $(o).find("input[id^='profissaoPessoaCadastroAvalista']").val(avalistaDto.Profissao);
            $(o).find("input[id^='empresaTrabalhoPessoaCadastroAvalista']").val(avalistaDto.EmpresaTrabalho);
            $(o).find("input[id^='cargoPessoaCadastroAvalista']").val(avalistaDto.Cargo);

            if (avalistaDto.DataAdmissao != null)
                $(o).find("input[id^='dataAdmissaoPessoaCadastroAvalista']").val(moment(avalistaDto.DataAdmissao).format("DD/MM/YYYY"));

            if (avalistaDto.ValorSalario != null)
                $(o).find("input[id^='valorSalarioPessoaCadastroAvalista']").val(Globalize.format(avalistaDto.ValorSalario, "n2"));

            if (avalistaDto.DataReferenciaSalario != null)
                $(o).find("input[id^='dataReferenciaSalarioPessoaCadastroAvalista']").val(moment(avalistaDto.DataReferenciaSalario).format("DD/MM/YYYY"));

            $(o).find("input[id^='empresaPessoalPessoaCadastroAvalista']").val(avalistaDto.EmpresaPessoal);
            $(o).find("input[id^='telefoneEmpresaPessoaCadastroAvalista']").val(formatarTelefone(avalistaDto.TelefoneEmpresa));
            $(o).find("input[id^='emailEmpresaPessoaCadastroAvalista']").val(avalistaDto.EmailEmpresa);
        }

        function carregarModalAvalista(avalistaDto) {

            var htmlPartial = $("#panelPessoaCadastroAvalista").html();

            // set o id randômico
            var idRandomAvalista = Math.floor((Math.random() * 100000000) + 1);

            // seta novos ids para cada collapse panel
            htmlPartial = htmlPartial.replace("idCollapse", idRandomAvalista);
            htmlPartial = htmlPartial.replace("idCollapse", idRandomAvalista);
            htmlPartial = htmlPartial.replace("idCollapse", idRandomAvalista);

            var idNomePessoaCadastroAvalista = "nomePessoaCadastroAvalista_" + idRandomAvalista;
            var idCpfPessoaCadastroAvalista = "cpfPessoaCadastroAvalista_" + idRandomAvalista;
            var idRgPessoaCadastroAvalista = "rgPessoaCadastroAvalista_" + idRandomAvalista;
            var idCidadeNascimentoPessoaCadastroAvalista = "cidadeNascimentoPessoaCadastroAvalista_" + idRandomAvalista;
            var idUfNascimentoPessoaCadastroAvalista = "ufNascimentoPessoaCadastroAvalista_" + idRandomAvalista;
            var idEstadoCivilPessoaCadastroAvalista = "estadoCivilPessoaCadastroAvalista_" + idRandomAvalista;
            var idRegimeCasamentoPessoaCadastroAvalista = "regimeCasamentoPessoaCadastroAvalista_" + idRandomAvalista;

            var idTipoResidenciaPessoaCadastroAvalista = "tipoResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idValorAluguelPessoaCadastroAvalista = "valorAluguelPessoaCadastroAvalista_" + idRandomAvalista;
            var idTempoResidencialPessoaCadastroAvalista = "tempoResidencialPessoaCadastroAvalista_" + idRandomAvalista;
            var idProfissaoPessoaCadastroAvalista = "profissaoPessoaCadastroAvalista_" + idRandomAvalista;
            var idEmpresaTrabalhoPessoaCadastroAvalista = "empresaTrabalhoPessoaCadastroAvalista_" + idRandomAvalista;
            var idCargoPessoaCadastroAvalista = "cargoPessoaCadastroAvalista_" + idRandomAvalista;
            var idValorSalarioPessoaCadastroAvalista = "valorSalarioPessoaCadastroAvalista_" + idRandomAvalista;
            var idEmpresaPessoalPessoaCadastroAvalista = "empresaPessoalPessoaCadastroAvalista_" + idRandomAvalista;
            var idTelefoneEmpresaPessoaCadastroAvalista = "telefoneEmpresaPessoaCadastroAvalista_" + idRandomAvalista;
            var idEmailEmpresaPessoaCadastroAvalista = "emailEmpresaPessoaCadastroAvalista_" + idRandomAvalista;

            var idCep = "cepResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idLogradouroResidencia = "logradouroResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idNumeroResidencia = "numeroResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idComplementoResidencia = "complementoResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idBairroResidencia = "bairroResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idCidadeResidencia = "cidadeResidenciaPessoaCadastroAvalista_" + idRandomAvalista;
            var idUfResidencia = "ufResidenciaPessoaCadastroAvalista_" + idRandomAvalista;

            htmlPartial = htmlPartial.replace("nomePessoaCadastroAvalista", idNomePessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("cpfPessoaCadastroAvalista", idCpfPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("rgPessoaCadastroAvalista", idRgPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("cidadeNascimentoPessoaCadastroAvalista", idCidadeNascimentoPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("ufNascimentoPessoaCadastroAvalista", idUfNascimentoPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("estadoCivilPessoaCadastroAvalista", idEstadoCivilPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("regimeCasamentoPessoaCadastroAvalista", idRegimeCasamentoPessoaCadastroAvalista);

            htmlPartial = htmlPartial.replace("tipoResidenciaPessoaCadastroAvalista", idTipoResidenciaPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("valorAluguelPessoaCadastroAvalista", idValorAluguelPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("tempoResidencialPessoaCadastroAvalista", idTempoResidencialPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("profissaoPessoaCadastroAvalista", idProfissaoPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("empresaTrabalhoPessoaCadastroAvalista", idEmpresaTrabalhoPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("cargoPessoaCadastroAvalista", idCargoPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("valorSalarioPessoaCadastroAvalista", idValorSalarioPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("empresaPessoalPessoaCadastroAvalista", idEmpresaPessoalPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("telefoneEmpresaPessoaCadastroAvalista", idTelefoneEmpresaPessoaCadastroAvalista);
            htmlPartial = htmlPartial.replace("emailEmpresaPessoaCadastroAvalista", idEmailEmpresaPessoaCadastroAvalista);

            htmlPartial = htmlPartial.replace("cepResidenciaPessoaCadastroAvalista", idCep);
            htmlPartial = htmlPartial.replace("logradouroResidenciaPessoaCadastroAvalista", idLogradouroResidencia);
            htmlPartial = htmlPartial.replace("numeroResidenciaPessoaCadastroAvalista", idNumeroResidencia);
            htmlPartial = htmlPartial.replace("complementoResidenciaPessoaCadastroAvalista", idComplementoResidencia);
            htmlPartial = htmlPartial.replace("bairroResidenciaPessoaCadastroAvalista", idBairroResidencia);
            htmlPartial = htmlPartial.replace("cidadeResidenciaPessoaCadastroAvalista", idCidadeResidencia);
            htmlPartial = htmlPartial.replace("ufResidenciaPessoaCadastroAvalista", idUfResidencia);

            var conjugeAvalistaInput = "conjugeAvalistaInput_" + idRandomAvalista;
            var conjugeAvalistaHidden = "conjugeAvalistaHidden_" + idRandomAvalista;
            var conjugeAvalistaAdicionar = "conjugeAvalistaAdicionar_" + idRandomAvalista;
            var conjugeAvalistaEditar = "conjugeAvalistaEditar_" + idRandomAvalista;

            var paiAvalistaInput = "paiAvalistaInput_" + idRandomAvalista;
            var paiAvalistaHidden = "paiAvalistaHidden_" + idRandomAvalista;
            var paiAvalistaAdicionar = "paiAvalistaAdicionar_" + idRandomAvalista;

            var maeAvalistaInput = "maeAvalistaInput_" + idRandomAvalista;
            var maeAvalistaHidden = "maeAvalistaHidden_" + idRandomAvalista;
            var maeAvalistaAdicionar = "maeAvalistaAdicionar_" + idRandomAvalista;

            htmlPartial = htmlPartial.replace("conjugeAvalistaInput", conjugeAvalistaInput);
            htmlPartial = htmlPartial.replace("conjugeAvalistaHidden", conjugeAvalistaHidden);
            htmlPartial = htmlPartial.replace("conjugeAvalistaAdicionar", conjugeAvalistaAdicionar);
            htmlPartial = htmlPartial.replace("conjugeAvalistaEditar", conjugeAvalistaEditar);

            htmlPartial = htmlPartial.replace("paiAvalistaInput", paiAvalistaInput);
            htmlPartial = htmlPartial.replace("paiAvalistaHidden", paiAvalistaHidden);
            htmlPartial = htmlPartial.replace("paiAvalistaAdicionar", paiAvalistaAdicionar);

            htmlPartial = htmlPartial.replace("maeAvalistaInput", maeAvalistaInput);
            htmlPartial = htmlPartial.replace("maeAvalistaHidden", maeAvalistaHidden);
            htmlPartial = htmlPartial.replace("maeAvalistaAdicionar", maeAvalistaAdicionar);

            var dataNascimentoAvalista = "dataNascimentoPessoaCadastroAvalista_" + idRandomAvalista;
            var dataAdmissaoAvalista = "dataAdmissaoPessoaCadastroAvalista_" + idRandomAvalista;
            var dataReferenciaAvalista = "dataReferenciaSalarioPessoaCadastroAvalista_" + idRandomAvalista;

            htmlPartial = htmlPartial.replace("dataNascimentoPessoaCadastroAvalista", dataNascimentoAvalista);
            htmlPartial = htmlPartial.replace("dataAdmissaoPessoaCadastroAvalista", dataAdmissaoAvalista);
            htmlPartial = htmlPartial.replace("dataReferenciaSalarioPessoaCadastroAvalista", dataReferenciaAvalista);

            var idAvalistaHidden = "idAvalistaHidden_" + idRandomAvalista;
            var idAvalistaInput = "idAvalistaInput_" + idRandomAvalista;

            htmlPartial = htmlPartial.replace("idAvalistaHidden", idAvalistaHidden);
            htmlPartial = htmlPartial.replace("idAvalistaInput", idAvalistaInput);

            $("#divAvalista").append(htmlPartial);

            $("#" + paiAvalistaAdicionar).data("id", paiAvalistaHidden);
            $("#" + paiAvalistaAdicionar).data("nome", paiAvalistaInput);

            $("#" + maeAvalistaAdicionar).data("id", maeAvalistaHidden);
            $("#" + maeAvalistaAdicionar).data("nome", maeAvalistaInput);

            $("#" + conjugeAvalistaAdicionar).data("id", conjugeAvalistaHidden);
            $("#" + conjugeAvalistaAdicionar).data("nome", conjugeAvalistaInput);

            $("#" + conjugeAvalistaEditar).data("id", conjugeAvalistaHidden);
            $("#" + conjugeAvalistaEditar).data("nome", conjugeAvalistaInput);

            // setando os valores, se houverem
            if (avalistaDto != null) {

                $("#" + idNomePessoaCadastroAvalista).val(avalistaDto.Nome);
                $("#" + idCpfPessoaCadastroAvalista).val(avalistaDto.Cpf);
                $("#" + idRgPessoaCadastroAvalista).val(avalistaDto.Rg);
                $("#" + idCidadeNascimentoPessoaCadastroAvalista).val(avalistaDto.CidadeNascimento);
                $("#" + idUfNascimentoPessoaCadastroAvalista).val(avalistaDto.UfNascimento);
                $("#" + idEstadoCivilPessoaCadastroAvalista).val(avalistaDto.IdEstadoCivil);
                $("#" + idRegimeCasamentoPessoaCadastroAvalista).val(avalistaDto.IdRegimeCasamento);
                $("#" + idTipoResidenciaPessoaCadastroAvalista).val(avalistaDto.IdTipoResidencia);

                if (avalistaDto.ValorAluguel != null)
                    $("#" + idValorAluguelPessoaCadastroAvalista).val(Globalize.format(avalistaDto.ValorAluguel, "n2"));

                $("#" + idTempoResidencialPessoaCadastroAvalista).val(avalistaDto.TempoResidencial);
                $("#" + idProfissaoPessoaCadastroAvalista).val(avalistaDto.Profissao);
                $("#" + idEmpresaTrabalhoPessoaCadastroAvalista).val(avalistaDto.EmpresaTrabalho);
                $("#" + idCargoPessoaCadastroAvalista).val(avalistaDto.Cargo);

                if (avalistaDto.ValorSalario != null)
                    $("#" + idValorSalarioPessoaCadastroAvalista).val(Globalize.format(avalistaDto.ValorSalario, "n2"));

                $("#" + idEmpresaPessoalPessoaCadastroAvalista).val(avalistaDto.EmpresaPessoal);
                $("#" + idTelefoneEmpresaPessoaCadastroAvalista).val(avalistaDto.TelefoneEmpresa);
                $("#" + idEmailEmpresaPessoaCadastroAvalista).val(avalistaDto.EmailEmpresa);

                $("#" + idCep).val(avalistaDto.CepResidencia);
                $("#" + idLogradouroResidencia).val(avalistaDto.LogradouroResidencia);
                $("#" + idNumeroResidencia).val(avalistaDto.NumeroResidencia);
                $("#" + idComplementoResidencia).val(avalistaDto.ComplementoResidencia);
                $("#" + idBairroResidencia).val(avalistaDto.BairroResidencia);
                $("#" + idCidadeResidencia).val(avalistaDto.CidadeResidencia);
                $("#" + idUfResidencia).val(avalistaDto.UfResidencia);

                if (avalistaDto.PessoaConjugeDto != null) {
                    $("#" + conjugeAvalistaHidden).val(avalistaDto.PessoaConjugeDto.Id);
                    $("#" + conjugeAvalistaInput).val(avalistaDto.PessoaConjugeDto.Nome);
                }

                if (avalistaDto.PessoaPaiDto != null) {
                    $("#" + paiAvalistaHidden).val(avalistaDto.PessoaPaiDto.Id);
                    $("#" + paiAvalistaInput).val(avalistaDto.PessoaPaiDto.Nome);
                }

                if (avalistaDto.PessoaMaeDto != null) {
                    $("#" + maeAvalistaHidden).val(avalistaDto.PessoaMaeDto.Id);
                    $("#" + maeAvalistaInput).val(avalistaDto.PessoaMaeDto.Nome);
                }

                if (avalistaDto.DataNascimento != null)
                    $("#" + dataNascimentoAvalista).val(moment(avalistaDto.DataNascimento).format("DD/MM/YYYY"));

                if (avalistaDto.DataAdmissao != null)
                    $("#" + dataAdmissaoAvalista).val(moment(avalistaDto.DataAdmissao).format("DD/MM/YYYY"));

                if (avalistaDto.DataReferenciaSalario != null)
                    $("#" + dataReferenciaAvalista).val(moment(avalistaDto.DataReferenciaSalario).format("DD/MM/YYYY"));

                $("#" + idAvalistaHidden).val(avalistaDto.Id);
                $("#" + idAvalistaInput).val(avalistaDto.Nome);
            }

            $("#" + dataNascimentoAvalista).datepicker({
                dateFormat: 'dd/mm/yy',
                dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                nextText: 'Próximo',
                prevText: 'Anterior',
                changeMonth: true,
                changeYear: true
            });

            $("#" + dataAdmissaoAvalista).datepicker({
                dateFormat: 'dd/mm/yy',
                dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                nextText: 'Próximo',
                prevText: 'Anterior',
                changeMonth: true,
                changeYear: true
            });

            $("#" + dataReferenciaAvalista).datepicker({
                dateFormat: 'dd/mm/yy',
                dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                nextText: 'Próximo',
                prevText: 'Anterior',
                changeMonth: true,
                changeYear: true
            });

            $(".cpf").mask("000.000.000-00");
            $(".cep").mask("00000-000");
            $(".valor").mask("000.000.000,00", { reverse: true });
            $(".data").mask("00/00/0000");
            $(".ano").mask("0000");
            $(".celularDDD").mask("(##) 9999-99999").focusout(function (event) {
                var target, phone, element;
                target = (event.currentTarget) ? event.currentTarget : event.srcElement;
                phone = target.value.replace(/\D/g, '');
                element = $(target);
                element.unmask();
                if (phone.length > 10) {
                    element.mask("(99) 99999-9999");
                }
                else {
                    element.mask("(99) 9999-99999");
                }
            });

            $("#" + idCep).change(function () {
                var cep = $(this).val().replace("-", "");

                // verificação cep
                if (cep == null || cep == "") { return; }

                $.ajax({
                    dataType: "json",
                    type: "GET",
                    url: "https://viacep.com.br/ws/" + cep + "/json/",
                    contentType: "application/json",
                    success: function (data) {

                        if (data == null || data.erro)
                            return;

                        $("#" + idLogradouroResidencia).val("");
                        $("#" + idComplementoResidencia).val("");
                        $("#" + idBairroResidencia).val("");
                        $("#" + idCidadeResidencia).val("");
                        $("#" + idUfResidencia).val("");
                        $("#" + idNumeroResidencia).val("");

                        $("#" + idLogradouroResidencia).val(data.logradouro);
                        $("#" + idComplementoResidencia).val(data.complemento);
                        $("#" + idBairroResidencia).val(data.bairro);
                        $("#" + idCidadeResidencia).val(data.localidade);
                        $("#" + idUfResidencia).val(data.uf);
                    }
                });

            });

            $("#" + conjugeAvalistaInput).autocomplete({
                minLength: 3,
                source: function (request, response) {

                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/ListarAutoComplete", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa)
                        {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }
                    $("#" + conjugeAvalistaHidden).val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        $("#" + conjugeAvalistaInput).val("");
                        $("#" + conjugeAvalistaHidden).val("");
                    }
                }
            });

            $("#" + paiAvalistaInput).autocomplete({
                minLength: 3,
                source: function (request, response) {

                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/ListarAutoComplete", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa)
                        {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }
                    $("#" + paiAvalistaHidden).val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        if (confirm("Deseja cadastrar essa pessoa?")) {
                            incluirPessoaCadastroAuxiliarSimples($("#" + paiAvalistaInput).val(), '@usuarioDto.Id', paiAvalistaHidden, paiAvalistaInput);
                        }
                        else {
                            $("#" + paiAvalistaInput).val("");
                            $("#" + paiAvalistaHidden).val("");
                        }
                    }
                }
            });

            $("#" + maeAvalistaInput).autocomplete({
                minLength: 3,
                source: function (request, response) {

                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/ListarAutoComplete", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa)
                        {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }
                    $("#" + maeAvalistaHidden).val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        if (confirm("Deseja cadastrar essa pessoa?")) {
                            incluirPessoaCadastroAuxiliarSimples($("#" + maeAvalistaInput).val(), '@usuarioDto.Id', maeAvalistaHidden, maeAvalistaInput);
                        }
                        else {
                            $("#" + maeAvalistaInput).val("");
                            $("#" + maeAvalistaHidden).val("");
                        }
                    }
                }
            });

            $("#" + idAvalistaInput).autocomplete({
                minLength: 3,
                source: function (request, response) {

                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/Listar", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa)
                        {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id, avalistaDto: pessoa }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id, avalistaDto: pessoa }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }

                    carregarAvalista(idAvalistaInput, ui.item.avalistaDto);

                    $("#" + idAvalistaHidden).val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        $("#" + idAvalistaHidden).val("");
                        $("#" + idAvalistaInput).val("");
                    }
                }
            });

            $(".excluirAvalista").click(function (o) {
                (o.currentTarget).parentElement.parentElement.parentElement.parentElement.parentElement.parentElement.remove();
            });
        }

        function carregarDadosModal(data) {

            // aba - residência

            $("#cepResidencia").val(data.CepResidencia);
            $("#logradouroResidencia").val(data.LogradouroResidencia);
            $("#numeroResidencia").val(data.NumeroResidencia);
            $("#complementoResidencia").val(data.ComplementoResidencia);
            $("#bairroResidencia").val(data.BairroResidencia);
            $("#cidadeResidencia").val(data.CidadeResidencia);
            $("#ufResidencia").val(data.UfResidencia);
            $("#tipoResidencia").val(data.IdTipoResidencia);
            $("#valorAluguel").val(Globalize.format(data.ValorAluguel, "n2"));
            $("#tempoResidencial").val(data.TempoResidencial);

            var tipoTelefoneDto = @Html.Raw(Json.Encode(ViewBag.TipoTelefone));
            var tipoReferenciaDto = @Html.Raw(Json.Encode(ViewBag.TipoReferencia));

            // aba - avalistas

            $("#divAvalista .panel-avalista").each(function (i, o) {
                $(o).remove();
            });

            $(data.PessoaAvalistaDto).each(function (i, o) {
                carregarModalAvalista(o.AvalistaDto);
            });

            // aba - contatos

            $("#tbPessoaTelefone").DataTable().clear().draw();
            $(data.PessoaTelefoneDto).each(function (i, o) {

                var id = Math.floor((Math.random() * 100000000) + 1);

                var selectTipoTelefone = "<select id='" + id + "' name='tipoTelefone' class='form-control tipoTelefone'>"
                selectTipoTelefone += "<option value=''>Tipo Telefone</option>";
                $(tipoTelefoneDto).each(function (i, e) {
                    selectTipoTelefone += "<option value='" + e.Id + "'>" + e.Nome + "</option>";
                });
                selectTipoTelefone += '</select>';

                $("#tbPessoaTelefone").DataTable().rows.add([
                {
                    "Id": o.Id,
                    "Pais": "<input type='text' class='form-control pais' value='" + (o.Pais == null ? '' : o.Pais) + "' />",
                    "DDD": "<input type='text' class='form-control ddd' value='" + (o.DDD == null ? '' : o.DDD) + "' />",
                    "Numero": "<input type='text' class='form-control numero celular' value='" + o.Numero + "' />",
                    "NomeContato": "<input type='text' class='form-control nomeContatoTelefone' value='" + (o.NomeContato == null ? '' : o.NomeContato) + "' />",
                    "IdTipoTelefone": selectTipoTelefone,
                    "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                }]).draw();

                if (o.IdTipoTelefone > 0)
                    $("#" + id).val(o.IdTipoTelefone);
            });

            $("#tbPessoaEmail").DataTable().clear().draw();
            $(data.PessoaEmailDto).each(function (i, o) {

                $("#tbPessoaEmail").DataTable().rows.add([
                    {
                        "Id": o.Id,
                        "Email": "<input type='text' class='form-control emailContato' value='" + o.Email + "' />",
                        "NomeContato": "<input type='text' class='form-control nomeContatoEmail' value='" + (o.NomeContato == null ? '' : o.NomeContato) + "' />",
                        "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                    }]).draw();
            });

            // aba - dados pessoais

            $("#nome").val(data.Nome);
            $("#cpf").val(data.Cpf);
            $("#rg").val(data.Rg);

            if (data.DataNascimento != null)
                $("#dataNascimento").val(moment(data.DataNascimento).format("DD/MM/YYYY"));

            $("#cidadeNascimento").val(data.CidadeNascimento);
            $("#ufNascimento").val(data.UfNascimento);
            $("#estadoCivil").val(data.IdEstadoCivil);
            $("#regimeCasamento").val(data.IdRegimeCasamento);

            var conjuge = data.PessoaConjugeDto;
            if (conjuge != null && conjuge.Nome != "")
            {
                $("#idConjuge").val(conjuge.Id);
                if (conjuge.Cpf == null || conjuge.Cpf == "")
                    $("#conjuge").val(conjuge.Nome);
                else
                    $("#conjuge").val(conjuge.Nome + " (" + formatarCpf(conjuge.Cpf) + ")");
            }

            var pai = data.PessoaPaiDto;
            if (pai != null && pai.Nome != "")
            {
                $("#idPai").val(pai.Id);
                if (pai.Cpf == null || pai.Cpf == "")
                    $("#pai").val(pai.Nome);
                else
                    $("#pai").val(pai.Nome + " (" + formatarCpf(pai.Cpf) + ")");
            }

            var mae = data.PessoaMaeDto;
            if (mae != null && mae.Nome != "")
            {
                $("#idMae").val(mae.Id);
                if (mae.Cpf == null || mae.Cpf == "")
                    $("#mae").val(mae.Nome);
                else
                    $("#mae").val(mae.Nome + " (" + formatarCpf(mae.Cpf) + ")");
            }

            // aba - dados profissionais

            $("#profissao").val(data.Profissao);
            $("#empresaTrabalho").val(data.EmpresaTrabalho);
            $("#cargo").val(data.Cargo);

            if (data.DataAdmissao != null)
                $("#dataAdmissao").val(moment(data.DataAdmissao).format("DD/MM/YYYY"));

            $("#valorSalario").val(Globalize.format(data.ValorSalario, "n2"));

            if (data.DataReferenciaSalario != null)
                $("#dataReferenciaSalario").val(moment(data.DataReferenciaSalario).format("DD/MM/YYYY"));

            $("#empresaPessoal").val(data.EmpresaPessoal);
            $("#telefoneEmpresa").val(data.TelefoneEmpresa);
            $("#emailEmpresa").val(data.EmailEmpresa);

            // aba - referências

            $("#tbPessoaReferencia").DataTable().clear().draw();
            $(data.PessoaReferenciaDto).each(function (i, o) {

                var id = Math.floor((Math.random() * 100000000) + 1);

                var selectTipoReferencia = "<select id='" + id + "' name='tipoReferencia' class='form-control idTipoReferencia'>"
                selectTipoReferencia += "<option value=''>Tipo Referência</option>";
                $(tipoReferenciaDto).each(function (i, e) {
                    selectTipoReferencia += "<option value='" + e.Id + "'>" + e.Nome + "</option>";
                });
                selectTipoReferencia += '</select>';

                $("#tbPessoaReferencia").DataTable().rows.add([
                    {
                        "Id": o.Id,
                        "DataReferencia": "<input type='text' class='form-control data datepicker text-center dataReferencia' value='" + moment(o.DataReferencia).format("DD/MM/YYYY") + "' />",
                        "IdTipoReferencia": selectTipoReferencia,
                        "Telefone": "<input type='text' class='form-control celularDDD text-center telefoneReferencia' value='" + o.Telefone + "' />",
                        "Nome": "<input type='text' class='form-control text-center nomeReferencia' value='" + (o.Nome == null ? "" : o.Nome) + "' />",
                        "Descricao": "<textarea class='form-control descricaoReferencia' rows='3'>" + o.Descricao + "</textarea>",
                        "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                    }]).draw();

                $("#" + id).val(o.IdTipoReferencia);
            });

            // aba - histórico

            $("#tbPessoaHistorico").DataTable().clear().draw();
            $(data.PessoaHistoricoDto).each(function (i, o) {

                $("#tbPessoaHistorico").DataTable().rows.add([
                {
                    "Id": o.Id,
                    "DataHistorico": "<input type='text' class='form-control data datepicker text-center dataHistorico' value='" + moment(o.DataHistorico).format("DD/MM/YYYY") + "' />",
                    "Descricao": "<textarea class='form-control descricaoHistorico' rows='3'>" + o.Descricao + "</textarea>",
                    "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                }]).draw();
            });

            // aba - contratos

            $("#tbPessoaContrato").DataTable().clear().draw();
            $("#tbPessoaContrato").DataTable().rows.add(data.PessoaContratoDto).draw();

            // reaplica máscaras

            $(".cep").mask("00000-000");
            $(".cpf").mask("000.000.000-00");
            $(".valor").mask("000.000.000,00", { reverse: true });
            $(".ddd").mask("00");

            $(".celular").mask("9999-99999").focusout(function (event) {
                var target, phone, element;
                target = (event.currentTarget) ? event.currentTarget : event.srcElement;
                phone = target.value.replace(/\D/g, '');
                element = $(target);
                element.unmask();
                if (phone.length > 8) {
                    element.mask("99999-9999");
                }
                else {
                    element.mask("9999-99999");
                }
            });
            $(".celular").trigger('focusout');

            $(".celularDDD").mask("(##) 9999-99999").focusout(function (event) {
                var target, phone, element;
                target = (event.currentTarget) ? event.currentTarget : event.srcElement;
                phone = target.value.replace(/\D/g, '');
                element = $(target);
                element.unmask();
                if (phone.length > 10) {
                    element.mask("(99) 99999-9999");
                }
                else {
                    element.mask("(99) 9999-99999");
                }
            });
            $(".celularDDD").trigger('focusout');

            $(".dataHistorico").mask("00/00/0000");
            $(".dataHistorico").datepicker({
                dateFormat: 'dd/mm/yy',
                dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                nextText: 'Próximo',
                prevText: 'Anterior',
                changeMonth: true,
                changeYear: true
            });

            $(".dataReferencia").mask("00/00/0000");
            $(".dataReferencia").datepicker({
                dateFormat: 'dd/mm/yy',
                dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                nextText: 'Próximo',
                prevText: 'Anterior',
                changeMonth: true,
                changeYear: true
            });
        }

        function consultar(id)
        {
            var pessoaDto = { Id: id };

            $.ajax({
                dataType: "json",
                type: "GET",
                url: "/PessoaFisica/Listar",
                data: pessoaDto,
                contentType: "application/json",
                success: function (data) {

                    if (!data.Sucesso) {
                        alert(data.Erro ? "danger" : "warning", data.Mensagem);
                        return;
                    }

                    limparFormulario();
                    carregarDadosModal(data.Data[0]);
                    habilitarModal(false);
                    $("#lblAcao").text("Consultar");
                    $("#lblTitulo").text(data.Data[0].Nome);
                    $("#idPessoa").val("");
                    $("#btnIncluir").hide();
                    $("#btnAlterar").hide();
                    $("#modalPessoaFisica").modal('show');
                    $('#dadospessoais-tab').click();
                }
            });

        }

        function alterar(id)
        {
            var pessoaDto = { Id: id };

            $.ajax({
                dataType: "json",
                type: "GET",
                url: "/PessoaFisica/Listar",
                data: pessoaDto,
                contentType: "application/json",
                success: function (data) {

                    if (!data.Sucesso) {
                        alert(data.Erro ? "danger" : "warning", data.Mensagem);
                        return;
                    }

                    limparFormulario();
                    carregarDadosModal(data.Data[0]);
                    habilitarModal(true);

                    $(".telefoneAvalista").prop("disabled", "disabled");
                    $(".emailAvalista").prop("disabled", "disabled");

                    $("#idPessoa").val(id);

                    $("#lblAcao").text("Alterar");
                    $("#lblTitulo").text(data.Data[0].Nome);

                    $("#btnIncluir").hide();
                    $("#btnAlterar").show();

                    $("#modalPessoaFisica").modal('show');

                    $('#dadospessoais-tab').click();
                }
            });

        }

        function alterarStatus(data, obj) {
            if (confirm("Deseja " + (data.Ativo == false ? "ativar" : "inativar") + " pessoa física?")) {

                var pessoaDto = {};

                pessoaDto.Id = data.Id;
                pessoaDto.Ativo = !data.Ativo;

                if (!pessoaDto.Ativo) {
                    pessoaDto.IdUsuarioInativacao = '@usuarioDto.Id';
                    pessoaDto.DataInativacao = '@DateTime.UtcNow';
                }

                $.ajax({
                    dataType: "json",
                    type: "POST",
                    url: "/PessoaFisica/AlterarStatus",
                    data: JSON.stringify(pessoaDto),
                    contentType: "application/json",
                    success: function (data) {

                        if (!data.Sucesso) {
                            alert(data.Erro ? "danger" : "warning", data.Mensagem);
                            return;
                        }

                        $("#tbPessoa").DataTable().row($(obj).parents("tr")).invalidate().data(data.Data[0]).draw();
                    }
                });
            }
        }

        $(document).ready(function () {

            var tbPessoa = $("#tbPessoa").DataTable({
                "ordering": false,
                "bFilter": false,
                "paging": true,
                "pageLength": 25,
                "ordering": false,
                "info": false,
                "searching": false,
                "language": {
                    "lengthMenu": "_MENU_ registros por página",
                    "zeroRecords": "Sem registros a serem exibidos",
                    "info": "Página _PAGE_ de _PAGES_",
                    "infoEmpty": "Sem registros a serem exibidos",
                    "infoFiltered": "(filtrados de _MAX_ total de registros)",
                    "sSearch": "Pesquisar",
                    "oPaginate": { "sNext": "Próximo", "sPrevious": "Anterior", "sFirst": "Primeiro", "sLast": "Último" }
                },
                "columns":
                    [
                        { "data": "Id", "className": "text-center", "visible": false },
                        { "data": "Nome", "className": "text-center" },
                        {
                            "data": function (data, type, row)
                            {
                                return formatarCpf(data.Cpf);
                            }, "className": "text-center"
                        },
                        { "data": "Rg", "className": "text-center" },
                        { "data": function (data, type, row) { return data["DataNascimento"] != null ? moment(data["DataNascimento"]).format("DD/MM/YYYY") : "" }, "className": "text-center" },
                        { "data": function (data, type, row) { return "<a href='#' onclick='alterarStatus(" + JSON.stringify(data) + ", this)'>" + (data.Ativo ? "Sim" : "Não") + "</a>"; }, "className": "text-center" },
                        {
                            "data": function (data, type, row) {
                                var consultar = "<i class='glyphicon glyphicon-search' title='Consultar' style='cursor: pointer' onclick='consultar(" + data.Id + ")'></i>";
                                var alterar = "<i class='glyphicon glyphicon-edit' title='Editar' style='cursor: pointer' onclick='alterar(" + data.Id + ")'></i>";

                                return consultar + " " + alterar;

                            }, "className": "text-center"
                        }
                    ]
            });

            var tbPessoaTelefone = $("#tbPessoaTelefone").DataTable({
                "ordering": false,
                "bFilter": false,
                "paging": false,
                "ordering": false,
                "info": false,
                "searching": false,
                "language": {
                    "lengthMenu": "_MENU_ registros por página",
                    "zeroRecords": "Sem registros a serem exibidos",
                    "info": "Página _PAGE_ de _PAGES_",
                    "infoEmpty": "Sem registros a serem exibidos",
                    "infoFiltered": "(filtrados de _MAX_ total de registros)",
                    "sSearch": "Pesquisar",
                    "oPaginate": { "sNext": "Próximo", "sPrevious": "Anterior", "sFirst": "Primeiro", "sLast": "Último" }
                },
                "columns":
                    [
                        { "data": "Id", "className": "text-center", "visible": false },
                        { "data": "Pais", "className": "text-center" },
                        { "data": "DDD", "className": "text-center" },
                        { "data": "Numero", "className": "text-center" },
                        { "data": "NomeContato", "className": "text-center" },
                        { "data": "IdTipoTelefone", "className": "text-center" },
                        { "data": "Acao", "className": "text-center" }
                    ]
            });

            var tbPessoaEmail = $("#tbPessoaEmail").DataTable({
                "ordering": false,
                "bFilter": false,
                "paging": false,
                "ordering": false,
                "info": false,
                "searching": false,
                "language": {
                    "lengthMenu": "_MENU_ registros por página",
                    "zeroRecords": "Sem registros a serem exibidos",
                    "info": "Página _PAGE_ de _PAGES_",
                    "infoEmpty": "Sem registros a serem exibidos",
                    "infoFiltered": "(filtrados de _MAX_ total de registros)",
                    "sSearch": "Pesquisar",
                    "oPaginate": { "sNext": "Próximo", "sPrevious": "Anterior", "sFirst": "Primeiro", "sLast": "Último" }
                },
                "columns":
                    [
                        { "data": "Id", "className": "text-center", "visible": false },
                        { "data": "Email", "className": "text-center" },
                        { "data": "NomeContato", "className": "text-center" },
                        { "data": "Acao", "className": "text-center" }
                    ]
            });

            var tbPessoaHistorico = $("#tbPessoaHistorico").DataTable({
                "ordering": false,
                "bFilter": false,
                "paging": false,
                "ordering": false,
                "info": false,
                "searching": false,
                "autoWidth": false,
                "language": {
                    "lengthMenu": "_MENU_ registros por página",
                    "zeroRecords": "Sem registros a serem exibidos",
                    "info": "Página _PAGE_ de _PAGES_",
                    "infoEmpty": "Sem registros a serem exibidos",
                    "infoFiltered": "(filtrados de _MAX_ total de registros)",
                    "sSearch": "Pesquisar",
                    "oPaginate": { "sNext": "Próximo", "sPrevious": "Anterior", "sFirst": "Primeiro", "sLast": "Último" }
                },
                "columns":
                    [
                        { "data": "Id", "className": "text-center", "visible": false, "width": "5%" },
                        { "data": "DataHistorico", "className": "text-center", "width": "5%" },
                        { "data": "Descricao", "className": "text-center", "width": "85%" },
                        { "data": "Acao", "className": "text-center", "width": "5%" }
                    ]
            });

            var tbPessoaReferencia = $("#tbPessoaReferencia").DataTable({
                "ordering": false,
                "bFilter": false,
                "paging": false,
                "ordering": false,
                "info": false,
                "searching": false,
                "autoWidth": false,
                "language": {
                    "lengthMenu": "_MENU_ registros por página",
                    "zeroRecords": "Sem registros a serem exibidos",
                    "info": "Página _PAGE_ de _PAGES_",
                    "infoEmpty": "Sem registros a serem exibidos",
                    "infoFiltered": "(filtrados de _MAX_ total de registros)",
                    "sSearch": "Pesquisar",
                    "oPaginate": { "sNext": "Próximo", "sPrevious": "Anterior", "sFirst": "Primeiro", "sLast": "Último" }
                },
                "columns":
                    [
                        { "data": "Id", "className": "text-center", "visible": false, "width": "5%" },
                        { "data": "DataReferencia", "className": "text-center", "width": "5%" },
                        { "data": "IdTipoReferencia", "className": "text-center", "width": "15%" },
                        { "data": "Telefone", "className": "text-center", "width": "15%" },
                        { "data": "Nome", "className": "text-center", "width": "20%" },
                        { "data": "Descricao", "className": "text-center", "width": "35%" },
                        { "data": "Acao", "className": "text-center", "width": "5%" }
                    ]
            });

            var tbPessoaContrato = $("#tbPessoaContrato").DataTable({
                "ordering": false,
                "bFilter": false,
                "paging": false,
                "ordering": false,
                "info": false,
                "searching": false,
                "language": {
                    "lengthMenu": "_MENU_ registros por página",
                    "zeroRecords": "Sem registros a serem exibidos",
                    "info": "Página _PAGE_ de _PAGES_",
                    "infoEmpty": "Sem registros a serem exibidos",
                    "infoFiltered": "(filtrados de _MAX_ total de registros)",
                    "sSearch": "Pesquisar",
                    "oPaginate": { "sNext": "Próximo", "sPrevious": "Anterior", "sFirst": "Primeiro", "sLast": "Último" }
                },
                "columns":
                    [
                        { "data": "Id", "className": "text-center" },
                        { "data": "PessoaClienteDto.Nome", "className": "text-center" },
                        { "data": "VeiculoDto.Placa", "className": "text-center" },
                        { "data": "VeiculoDto.Modelo", "className": "text-center" },
                        { "data": function (data, type, row) { return data["DataContrato"] != null ? moment(data["DataContrato"]).format("DD/MM/YYYY") : "" }, "className": "text-center" },
                        { "data": function (data, type, row) { return data["ValorFinanciado"] != null ? Globalize.format(data.ValorFinanciado, "n2") : "" }, "className": "text-center" },
                        { "data": "SituacaoContratoDto.Nome", "className": "text-center" }
                    ]
            });

            // botão excluir tbPessoaTelefone
            $('#tbPessoaTelefone tbody').on('click', 'i.glyphicon-remove', function () {
                if (confirm("Deseja realmente excluir o telefone?")) {
                    tbPessoaTelefone.row($(this).parents('tr')).remove().draw();
                }
            });

            // botão excluir tbPessoaEmail
            $('#tbPessoaEmail tbody').on('click', 'i.glyphicon-remove', function () {
                if (confirm("Deseja realmente excluir o e-mail?")) {
                    tbPessoaEmail.row($(this).parents('tr')).remove().draw();
                }
            });

            // botão excluir tbPessoaReferencia
            $('#tbPessoaReferencia tbody').on('click', 'i.glyphicon-remove', function () {
                if (confirm("Deseja realmente excluir a referência?")) {
                    tbPessoaReferencia.row($(this).parents('tr')).remove().draw();
                }
            });

            // botão excluir tbPessoaHistorico
            $('#tbPessoaHistorico tbody').on('click', 'i.glyphicon-remove', function () {
                if (confirm("Deseja realmente excluir o histórico?")) {
                    tbPessoaHistorico.row($(this).parents('tr')).remove().draw();
                }
            });

            $("#pai").autocomplete({
                minLength: 3,
                source: function (request, response)
                {
                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/ListarAutoComplete", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa) {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }
                    $("#idPai").val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        if (confirm("Deseja cadastrar essa pessoa?")) {
                            incluirPessoaCadastroAuxiliarSimples($("#pai").val(), '@usuarioDto.Id', 'idPai', 'pai');
                        }
                        else {
                            $("#pai").val("");
                            $("#idPai").val("");
                        }
                    }
                }
            });

            $("#mae").autocomplete({
                minLength: 3,
                source: function (request, response)
                {
                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/ListarAutoComplete", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa) {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }
                    $("#idMae").val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        if (confirm("Deseja cadastrar essa pessoa?")) {
                            incluirPessoaCadastroAuxiliarSimples($("#mae").val(), '@usuarioDto.Id', 'idMae', 'mae');
                        }
                        else {
                            $("#mae").val("");
                            $("#idMae").val("");
                        }
                    }
                }
            });

            $("#conjuge").autocomplete({
                minLength: 3,
                source: function (request, response)
                {
                    var nome = null;
                    var cpf = null;
                    var numero = parseInt(request.term);

                    if (isNaN(numero))
                        nome = request.term;
                    else
                        cpf = request.term;

                    $.getJSON("/PessoaFisica/ListarAutoComplete", { Nome: nome, Cpf: cpf, IdTipoPessoa: '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()', Ativo: true }, function (data, status, xhr) {
                        // se não houver pessoa cadastrada, retorna mensagem ao usuário
                        if (data == null || data.Data.length <= 0) {
                            data.Data.push({ Id: 0, Nome: "Pessoa não cadastrada", Cpf: null });
                        }
                        response($.map(data.Data, function (pessoa) {
                            if (pessoa.Cpf == null)
                                return { label: pessoa.Nome, value: pessoa.Id }
                            else
                                return { label: pessoa.Nome + " (" + formatarCpf(pessoa.Cpf) + ")", value: pessoa.Id }
                        }));
                    });
                },
                select: function (event, ui) {
                    // apaga a pesquisa do cliente selecionado
                    if (ui.item.label == "Pessoa não cadastrada") {
                        ui.item.label = "";
                        ui.item.value = "";
                        return;
                    }
                    $("#idConjuge").val(ui.item.value);
                    ui.item.label = ui.item.label;
                    ui.item.value = ui.item.label;
                },
                change: function (event, ui) {
                    if (ui == null || ui.item == undefined || ui.item == null) {
                        $("#conjuge").val("");
                        $("#idConjuge").val("");
                    }
                }
            });

            $("#btnPesquisar").click(function () {

                var pessoaDto = {};

                pessoaDto.Nome = $("#nomePesquisar").val();
                pessoaDto.Cpf = $("#cpfPesquisar").val();
                pessoaDto.Rg = $("#rgPesquisar").val();
                pessoaDto.IdTipoPessoa = '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()';

                if ($("#ativo").val() == "0")
                    pessoaDto.Ativo = false;
                else if ($("#ativo").val() == "1")
                    pessoaDto.Ativo = true;

                $.ajax({
                    dataType: "json",
                    type: "GET",
                    url: "/PessoaFisica/ListarGrid",
                    data: pessoaDto,
                    contentType: "application/json",
                    success: function (data) {

                        if (!data.Sucesso) {
                            alert(data.Erro ? "danger" : "warning", data.Mensagem);
                            return;
                        }

                        tbPessoa.clear();
                        tbPessoa.rows.add(data.Data).draw();
                    }
                });

            });

            $("#btnNovo").click(function () {

                $("#lblAcao").html("Nova");
                $("#lblTitulo").html("");
                $("#btnIncluir").show();
                $("#btnAlterar").hide();

                limparFormulario();
                habilitarModal(true);

                $("#modalPessoaFisica").modal('show');
                $('#dadospessoais-tab').click();
            });

            $("#btnIncluir, #btnAlterar").click(function () {

                var pessoaDto = {};

                pessoaDto.Id = $("#idPessoa").val();
                pessoaDto.Nome = $("#nome").val();
                pessoaDto.Cpf = $("#cpf").val();

                pessoaDto.IdTipoPessoa = '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()';

                // aba - dados pessoais

                pessoaDto.CepResidencia = $("#cepResidencia").val();
                pessoaDto.LogradouroResidencia = $("#logradouroResidencia").val();
                pessoaDto.NumeroResidencia = $("#numeroResidencia").val();
                pessoaDto.ComplementoResidencia = $("#complementoResidencia").val();
                pessoaDto.BairroResidencia = $("#bairroResidencia").val();
                pessoaDto.CidadeResidencia = $("#cidadeResidencia").val();
                pessoaDto.UfResidencia = $("#ufResidencia").val();
                pessoaDto.IdTipoResidencia = $("#tipoResidencia").val();
                pessoaDto.ValorAluguel = $("#valorAluguel").val();
                pessoaDto.TempoResidencial = $("#tempoResidencial").val();

                // aba - avalistas

                pessoaDto.PessoaAvalistaDto = [];

                $(".panel-avalista").each(function (i, o) {

                    var idAvalistaHidden = $(o).find("input[id^='idAvalistaHidden_']").val();

                    if (idAvalistaHidden == undefined)
                        return;

                    pessoaDto.PessoaAvalistaDto.push({
                        "IdPessoa": pessoaDto.Id,
                        "IdAvalista": idAvalistaHidden,
                        "AvalistaDto":
                        {
                            "Id": idAvalistaHidden,
                            "IdUsuarioCadastro": '@usuarioDto.Id',
                            "DataCadastro": '@DateTime.UtcNow',
                            "IdTipoPessoa": '@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()',
                            "Nome": $(o).find("input[id^='nomePessoaCadastroAvalista']").val(),
                            "Cpf": $(o).find("input[id^='cpfPessoaCadastroAvalista']").val(),
                            "Rg": $(o).find("input[id^='rgPessoaCadastroAvalista']").val(),
                            "DataNascimento": $(o).find("input[id^='dataNascimentoPessoaCadastroAvalista']").val(),
                            "CidadeNascimento": $(o).find("input[id^='cidadeNascimentoPessoaCadastroAvalista']").val(),
                            "UfNascimento": $(o).find("select[id^='ufNascimentoPessoaCadastroAvalista']").val(),
                            "IdEstadoCivil": $(o).find("select[id^='estadoCivilPessoaCadastroAvalista']").val(),
                            "IdRegimeCasamento": $(o).find("select[id^='regimeCasamentoPessoaCadastroAvalista']").val(),
                            "IdConjuge": $(o).find("input[id^='conjugeAvalistaHidden']").val(),
                            "IdPai": $(o).find("input[id^='paiAvalistaHidden']").val(),
                            "IdMae": $(o).find("input[id^='maeAvalistaHidden']").val(),
                            "CepResidencia": $(o).find("input[id^='cepResidenciaPessoaCadastroAvalista']").val(),
                            "LogradouroResidencia": $(o).find("input[id^='logradouroResidenciaPessoaCadastroAvalista']").val(),
                            "NumeroResidencia": $(o).find("input[id^='numeroResidenciaPessoaCadastroAvalista']").val(),
                            "ComplementoResidencia": $(o).find("input[id^='complementoResidenciaPessoaCadastroAvalista']").val(),
                            "BairroResidencia": $(o).find("input[id^='bairroResidenciaPessoaCadastroAvalista']").val(),
                            "CidadeResidencia": $(o).find("input[id^='cidadeResidenciaPessoaCadastroAvalista']").val(),
                            "UfResidencia": $(o).find("select[id^='ufResidenciaPessoaCadastroAvalista']").val(),
                            "IdTipoResidencia": $(o).find("select[id^='tipoResidenciaPessoaCadastroAvalista']").val(),
                            "ValorAluguel": $(o).find("input[id^='valorAluguelPessoaCadastroAvalista']").val(),
                            "TempoResidencial": $(o).find("input[id^='tempoResidencialPessoaCadastroAvalista']").val(),
                            "Profissao": $(o).find("input[id^='profissaoPessoaCadastroAvalista']").val(),
                            "EmpresaTrabalho": $(o).find("input[id^='empresaTrabalhoPessoaCadastroAvalista']").val(),
                            "Cargo": $(o).find("input[id^='cargoPessoaCadastroAvalista']").val(),
                            "DataAdmissao": $(o).find("input[id^='dataAdmissaoPessoaCadastroAvalista']").val(),
                            "ValorSalario": $(o).find("input[id^='valorSalarioPessoaCadastroAvalista']").val(),
                            "DataReferenciaSalario": $(o).find("input[id^='dataReferenciaSalarioPessoaCadastroAvalista']").val(),
                            "EmpresaPessoal": $(o).find("input[id^='empresaPessoalPessoaCadastroAvalista']").val(),
                            "TelefoneEmpresa": $(o).find("input[id^='telefoneEmpresaPessoaCadastroAvalista']").val(),
                            "EmailEmpresa": $(o).find("input[id^='emailEmpresaPessoaCadastroAvalista']").val()
                        }
                    });

                });

                // aba - contatos

                pessoaDto.PessoaTelefoneDto = [];
                tbPessoaTelefone.rows().every(function (rowIdx, tableLoop, rowLoop) {

                    pessoaDto.PessoaTelefoneDto.push
                    ({
                        "Id": this.data().Id,
                        "IdPessoa": pessoaDto.Id,
                        "Pais": $($($(".pais")[rowIdx]).parents("tr").children().eq(0)).children().val(),
                        "DDD": $($($(".ddd")[rowIdx]).parents("tr").children().eq(1)).children().val(),
                        "Numero": $($($(".numero")[rowIdx]).parents("tr").children().eq(2)).children().val().replace("-",""),
                        "NomeContato": $($($(".nomeContatoTelefone")[rowIdx]).parents("tr").children().eq(3)).children().val(),
                        "IdTipoTelefone": $($($(".tipoTelefone")[rowIdx]).parents("tr").children().eq(4)).children().val()
                    });
                });

                pessoaDto.PessoaEmailDto = [];
                tbPessoaEmail.rows().every(function (rowIdx, tableLoop, rowLoop) {

                    pessoaDto.PessoaEmailDto.push
                        ({
                            "Id": this.data().Id,
                            "IdPessoa": pessoaDto.Id,
                            "Email": $($($(".emailContato")[rowIdx]).parents("tr").children().eq(0)).children().val(),
                            "NomeContato": $($($(".nomeContatoEmail")[rowIdx]).parents("tr").children().eq(1)).children().val()
                        });
                });

                // aba - dados pessoais

                pessoaDto.DataNascimento = $("#dataNascimento").val();
                pessoaDto.Rg = $("#rg").val();
                pessoaDto.CidadeNascimento = $("#cidadeNascimento").val();
                pessoaDto.UfNascimento = $("#ufNascimento").val();
                pessoaDto.IdEstadoCivil = $("#estadoCivil").val();
                pessoaDto.IdRegimeCasamento = $("#regimeCasamento").val();

                if ($("#idPai").val() != "")
                    pessoaDto.IdPai = $("#idPai").val();

                if ($("#idMae").val() != "")
                    pessoaDto.IdMae = $("#idMae").val();

                if ($("#idConjuge").val() != "")
                    pessoaDto.IdConjuge = $("#idConjuge").val();

                // aba - dados profissionais

                pessoaDto.Profissao = $("#profissao").val();
                pessoaDto.EmpresaTrabalho = $("#empresaTrabalho").val();

                pessoaDto.Cargo = $("#cargo").val();
                pessoaDto.DataAdmissao = $("#dataAdmissao").val();
                pessoaDto.ValorSalario = $("#valorSalario").val();
                pessoaDto.DataReferenciaSalario = $("#dataReferenciaSalario").val();
                pessoaDto.EmpresaPessoal = $("#empresaPessoal").val();
                pessoaDto.TelefoneEmpresa = $("#telefoneEmpresa").val().replace(/\D/g, '');
                pessoaDto.EmailEmpresa = $("#emailEmpresa").val();

                // aba - referências

                pessoaDto.PessoaReferenciaDto = [];
                tbPessoaReferencia.rows().every(function (rowIdx, tableLoop, rowLoop) {

                    pessoaDto.PessoaReferenciaDto.push
                        ({
                            "Id": this.data().Id,
                            "IdPessoa": pessoaDto.Id,
                            "DataReferencia": $($($(".dataReferencia")[rowIdx]).parents("tr").children().eq(0)).children().val(),
                            "IdTipoReferencia": $($($(".idTipoReferencia")[rowIdx]).parents("tr").children().eq(1)).children().val(),
                            "Telefone": $($($(".telefoneReferencia")[rowIdx]).parents("tr").children().eq(2)).children().val().replace(/[^\d]/g, ""),
                            "Nome": $($($(".nomeReferencia")[rowIdx]).parents("tr").children().eq(3)).children().val(),
                            "Descricao": $($($(".descricaoReferencia")[rowIdx]).parents("tr").children().eq(4)).children().val()
                        });
                });

                // aba - histórico

                pessoaDto.PessoaHistoricoDto = [];
                tbPessoaHistorico.rows().every(function (rowIdx, tableLoop, rowLoop) {

                    pessoaDto.PessoaHistoricoDto.push
                        ({
                            "Id": this.data().Id,
                            "IdPessoa": pessoaDto.Id,
                            "DataHistorico": $($($(".dataHistorico")[rowIdx]).parents("tr").children().eq(0)).children().val(),
                            "Descricao": $($($(".descricaoHistorico")[rowIdx]).parents("tr").children().eq(1)).children().val()
                        });
                });

                // aba - contratos

                var url = "";
                if (pessoaDto.Id == null || pessoaDto.Id <= 0)
                {
                    pessoaDto.IdUsuarioCadastro = '@usuarioDto.Id';
                    pessoaDto.DataCadastro = '@DateTime.UtcNow';
                    url = "/PessoaFisica/Incluir";
                }
                else
                {
                    url = "/PessoaFisica/Alterar";
                }

                $.ajax({
                    dataType: "json",
                    type: "POST",
                    url: url,
                    data: JSON.stringify(pessoaDto),
                    contentType: "application/json",
                    success: function (data) {

                        if (!data.Sucesso) {
                            alert(data.Erro ? "danger" : "warning", data.Mensagem);
                            return;
                        }

                        limparFormulario();

                        var idx;

                        if (pessoaDto.Id == null || pessoaDto.Id <= 0)
                        {
                            tbPessoa.clear();
                            tbPessoa.rows.add(data.Data).draw();
                        }
                        else
                        {
                            tbPessoa.rows().every(function (rowIdx, tableLoop, rowLoop) {
                                if (this.data().Id == pessoaDto.Id) {
                                    idx = rowIdx;
                                    return;
                                }
                            });

                            tbPessoa.row(idx).invalidate().data(data.Data[0]).draw();
                        }

                        $("#modalPessoaFisica").modal('hide');
                    }
                });

            });

            $("#btnAdicionarPessoaTelefone").click(function () {

                var tipoTelefoneDto = @Html.Raw(Json.Encode(ViewBag.TipoTelefone));

                var selectTipoTelefone = "<select name='tipoTelefone' class='form-control tipoTelefone'>"
                selectTipoTelefone += "<option value=''>Tipo Telefone</option>";
                $(tipoTelefoneDto).each(function (i, e) {
                    selectTipoTelefone += "<option value='" + e.Id + "'>" + e.Nome + "</option>";
                });
                selectTipoTelefone += '</select>';

                tbPessoaTelefone.rows.add([
                {
                    "Id": 0,
                    "Pais": "<input type='text' class='form-control pais' />",
                    "DDD": "<input type='text' class='form-control ddd' />",
                    "Numero": "<input type='text' class='form-control numero celular' />",
                    "NomeContato": "<input type='text' class='form-control nomeContatoTelefone' />",
                    "IdTipoTelefone": selectTipoTelefone,
                    "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                }]).draw();

                $(".ddd").mask("00");

                $(".celular").mask("9999-99999").focusout(function (event) {
                    var target, phone, element;
                    target = (event.currentTarget) ? event.currentTarget : event.srcElement;
                    phone = target.value.replace(/\D/g, '');
                    element = $(target);
                    element.unmask();
                    if (phone.length > 8) {
                        element.mask("99999-9999");
                    }
                    else {
                        element.mask("9999-99999");
                    }
                });
            });

            $("#btnAdicionarPessoaEmail").click(function () {

                tbPessoaEmail.rows.add([
                {
                    "Id": 0,
                    "Email": "<input type='text' class='form-control emailContato' />",
                    "NomeContato": "<input type='text' class='form-control nomeContatoEmail' />",
                    "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                }]).draw();
            });

            $("#btnAdicionarPessoaHistorico").click(function () {

                tbPessoaHistorico.rows.add([
                {
                    "Id": 0,
                    "DataHistorico": "<input type='text' class='form-control data datepicker text-center dataHistorico' />",
                    "Descricao": "<textarea class='form-control descricaoHistorico' rows='3'></textarea>",
                    "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                }]).draw();

                $(".dataHistorico").mask("00/00/0000");

                $(".dataHistorico").datepicker({
                    dateFormat: 'dd/mm/yy',
                    dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                    dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                    dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                    monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                    monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                    nextText: 'Próximo',
                    prevText: 'Anterior',
                    changeMonth: true,
                    changeYear: true
                });
            });

            $("#btnAdicionarPessoaReferencia").click(function () {

                var tipoReferenciaDto = @Html.Raw(Json.Encode(ViewBag.TipoReferencia));

                var selectTipoReferencia = "<select name='tipoReferencia' class='form-control idTipoReferencia'>"
                selectTipoReferencia += "<option value=''>Tipo Referência</option>";
                $(tipoReferenciaDto).each(function (i, e) {
                    selectTipoReferencia += "<option value='" + e.Id + "'>" + e.Nome + "</option>";
                });
                selectTipoReferencia += '</select>';

                tbPessoaReferencia.rows.add([
                {
                    "Id": 0,
                    "DataReferencia": "<input type='text' class='form-control data datepicker text-center dataReferencia' />",
                    "IdTipoReferencia": selectTipoReferencia,
                    "Telefone": "<input type='text' class='form-control celularDDD telefoneReferencia' />",
                    "Nome": "<input type='text' class='form-control nomeReferencia' />",
                    "Descricao": "<textarea class='form-control descricaoReferencia' rows='3'></textarea>",
                    "Acao": "<i class='glyphicon glyphicon-remove' title='Excluir' style='cursor: pointer'></i>"
                }]).draw();

                $(".dataReferencia").mask("00/00/0000");

                $(".dataReferencia").datepicker({
                    dateFormat: 'dd/mm/yy',
                    dayNames: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'],
                    dayNamesMin: ['D', 'S', 'T', 'Q', 'Q', 'S', 'S', 'D'],
                    dayNamesShort: ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'Sáb', 'Dom'],
                    monthNames: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],
                    monthNamesShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],
                    nextText: 'Próximo',
                    prevText: 'Anterior',
                    changeMonth: true,
                    changeYear: true
                });

                $(".telefoneReferencia").mask("(##) 9999-99999").focusout(function (event) {
                    var target, phone, element;
                    target = (event.currentTarget) ? event.currentTarget : event.srcElement;
                    phone = target.value.replace(/\D/g, '');
                    element = $(target);
                    element.unmask();
                    if (phone.length > 10) {
                        element.mask("(99) 99999-9999");
                    }
                    else {
                        element.mask("(99) 9999-99999");
                    }
                });
            });

            $("#btnAdicionarPessoaAvalista").click(function () {
                carregarModalAvalista(null);
            });

            $("#btnExportar").click(function () {

                var existeRegistroGrid = false;

                tbPessoa.rows().every(function (rowIdx, tableLoop, rowLoop) {
                    existeRegistroGrid = true;
                    return;
                });

                if (!existeRegistroGrid) {
                    alert("warning", "Não há registros a serem exportados");
                    return;
                }

                window.location.href = "@Url.Action("Exportar", "PessoaFisica")?Nome=" + $("#nomePesquisar").val() + "&Cpf=" + $("#cpfPesquisar").val() + "&Rg=" + $("#rgPesquisar").val() + "&IdTipoPessoa=" + "@TipoPessoaDto.TipoPessoa.PessoaFísica.GetHashCode()";
            });

            document.getElementById('frmPessoaFisicaImportar').onsubmit = function () {

                var formdata = new FormData();
                var fileInput = document.getElementById('arquivo');

                var existeArquivo = fileInput.files[0] != undefined ? true : false;

                if (!existeArquivo) {
                    alert("warning", "Selecione um arquivo para importar");
                    return false;
                }

                $.blockUI({ message: '<h5>Carregando...</h4>' });

                formdata.append(fileInput.files[0].name, fileInput.files[0]);

                var xhr = new XMLHttpRequest();

                xhr.open('POST', '/PessoaFisica/Importar');
                xhr.send(formdata);

                xhr.onreadystatechange = function () {
                    if (xhr.readyState == 4 && xhr.status == 200) {
                        var response = JSON.parse(xhr.responseText);
                        $.unblockUI();
                        alert("info", response.Mensagem);
                    }
                }

                return false;
            }
        });

    </script>
}
<div>
    <h2><i class="glyphicon glyphicon-pushpin" style="color: #0f3456" title="Pessoas Físicas"></i> Pessoas Físicas</h2>
    <hr />
    <div class="form-group">
        <div class="row">
            <div class="col-md-2">
                <input id="nomePesquisar" type="text" class="form-control" placeholder="Nome" />
            </div>
            <div class="col-md-2">
                <input id="cpfPesquisar" type="text" class="form-control cpf" placeholder="Cpf" />
            </div>
            <div class="col-md-2">
                <input id="rgPesquisar" type="text" class="form-control" placeholder="Rg" />
            </div>
            <div class="col-md-1">
                <select id="ativo" class="form-control">
                    <option value="">Ativo</option>
                    <option value="1">Sim</option>
                    <option value="0">Não</option>
                </select>
            </div>
            <div class="col-md-5">
                <input id="btnPesquisar" type="button" class="btn btn-info" value="Pesquisar" />
                <input id="btnNovo" type="button" class="btn" value="Nova Pessoa Física" />
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="row">
            <div class="col-md-12">
                <input id="btnExportar" type="button" class="btn btn-success" value="Exportar" />
                <form id="frmPessoaFisicaImportar" style="display: inline-flex">
                    <input id="arquivo" name="arquivo" type="file" />
                    <input id="btnImportar" type="submit" class="btn btn-warning" value="Importar" />
                </form>
            </div>
        </div>
    </div>
    <div class="form-group">
        <div class="table-responsive">
            <table id="tbPessoa" class="table table-hover nowrap">
                <thead>
                    <tr>
                        <td class="text-center" style="width: 5%"><b>Id</b></td>
                        <td class="text-center" style="width: 20%"><b>Nome</b></td>
                        <td class="text-center" style="width: 15%"><b>Cpf</b></td>
                        <td class="text-center" style="width: 15%"><b>Rg</b></td>
                        <td class="text-center" style="width: 15%"><b>Data Nascimento</b></td>
                        <td class="text-center" style="width: 15%"><b>Ativo</b></td>
                        <td class="text-center" style="width: 15%"><b>Ação</b></td>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>
</div>

<div class="modal fade" id="modalPessoaFisica" tabindex="-1" role="dialog" aria-labelledby="ModalPessoaFisica" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Fechar</span></button>
                <h4 class="modal-title" id="myModalLabel"><span id="lblAcao"></span> Pessoa Física <label id="lblTitulo"></label></h4>
            </div>
            <div class="modal-body">
                <form id="frmPessoaFisica" action="#">
                    <input id="idPessoa" type="hidden" />
                    <div class="form-group">
                        <div class="row">
                            <ul id="myTab" class="nav nav-tabs nav-justified" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="dadospessoais-tab" data-toggle="tab" href="#dadospessoais" role="tab" aria-controls="dadospessoais" aria-selected="true" style="height: 61px">Dados Pessoais</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="avalistas-tab" data-toggle="tab" href="#avalistas" role="tab" aria-controls="avalistas" aria-selected="false" style="height: 61px">Avalistas</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contato-tab" data-toggle="tab" href="#contato" role="tab" aria-controls="contato" aria-selected="false" style="height: 61px">Contatos</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="referencias-tab" data-toggle="tab" href="#referencias" role="tab" aria-controls="referencias" aria-selected="false" style="height: 61px">Referências</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="historico-tab" data-toggle="tab" href="#historico" role="tab" aria-controls="historico" aria-selected="false" style="height: 61px">Histórico</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="contratos-tab" data-toggle="tab" href="#contratos" role="tab" aria-controls="contratos" aria-selected="false" style="height: 61px">Contratos</a>
                                </li>
                            </ul>
                            <div class="tab-content">
                                <br />
                                <div class="tab-pane active" id="dadospessoais" role="tabpanel" aria-labelledby="dadospessoais-tab">
                                    <div class="rolagem-vertical">
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <label for="nome">Nome:</label>
                                                    <input id="nome" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label for="cpf">Cpf:</label>
                                                    <input id="cpf" type="text" class="form-control cpf" />
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="rg">Rg:</label>
                                                    <input id="rg" type="text" class="form-control" />
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="dataNascimento">Data Nascimento:</label>
                                                    <input id="dataNascimento" type="text" class="form-control data datepicker" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="cidadeNascimento">Naturalidade:</label>
                                                    <input id="cidadeNascimento" type="text" class="form-control" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="ufNascimento">Uf:</label>
                                                    @Html.DropDownList("ufNascimento", new SelectList(ViewBag.Estado, "Uf", "Nome"), "Uf", new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label for="estadoCivil">Estado Civil:</label>
                                                    @Html.DropDownList("estadoCivil", new SelectList(ViewBag.EstadoCivil, "Id", "Nome"), "Estado Civil", new { @class = "form-control" })
                                                </div>
                                                <div class="col-md-4">
                                                    <label for="regimeCasamento">Regime de Casamento:</label>
                                                    @Html.DropDownList("regimeCasamento", new SelectList(ViewBag.RegimeCasamento, "Id", "Nome"), "Regime de Casamento", new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <label class="control-label" for="conjuge">Cônjuge:</label>
                                                    <div class="input-group">
                                                        <input id="conjuge" name="conjuge" type="text" class="form-control" placeholder="Cônjuge (Mínimo de 3 caracteres - CPF ou Nome)" />
                                                        <input type="hidden" name="idConjuge" id="idConjuge" />
                                                        <div class="input-group-addon" style="cursor: pointer" data-id="idConjuge" data-nome="conjuge" data-titulo="Cônjuge" data-sem-vinculo="false" data-documento="Cpf" onclick="abrirModalPessoaCadastroAuxiliar(this)"><i class="glyphicon glyphicon-plus"></i></div>
                                                        <div class="input-group-addon" style="cursor: pointer" data-id="idConjuge" data-nome="conjuge" data-titulo="Cônjuge" data-sem-vinculo="false" data-documento="Cpf" data-editar="true" onclick="abrirModalPessoaCadastroAuxiliar(this)"><i class="glyphicon glyphicon-edit"></i></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <label class="control-label" for="pai">Pai:</label>
                                                    <div class="input-group">
                                                        <input id="pai" name="pai" type="text" class="form-control" placeholder="Pai (Mínimo de 3 caracteres - CPF ou Nome)" />
                                                        <input type="hidden" name="idPai" id="idPai" />
                                                        <div class="input-group-addon" style="cursor: pointer" data-id="idPai" data-nome="pai" data-titulo="Pai" data-sem-vinculo="true" data-documento="Cpf" onclick="abrirModalPessoaCadastroAuxiliar(this)"><i class="glyphicon glyphicon-plus"></i></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-7">
                                                    <label class="control-label" for="mae">Mãe:</label>
                                                    <div class="input-group">
                                                        <input id="mae" name="mae" type="text" class="form-control" placeholder="Mãe (Mínimo de 3 caracteres - CPF ou Nome)" />
                                                        <input type="hidden" name="idMae" id="idMae" />
                                                        <div class="input-group-addon" style="cursor: pointer" data-id="idMae" data-nome="mae" data-titulo="Mãe" data-sem-vinculo="true" data-documento="Cpf" onclick="abrirModalPessoaCadastroAuxiliar(this)"><i class="glyphicon glyphicon-plus"></i></div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-2">
                                                    <label for="cepResidencia">Cep:</label>
                                                    <input id="cepResidencia" type="text" class="form-control cep" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-5">
                                                    <label for="logradouroResidencia">Logradouro:</label>
                                                    <input id="logradouroResidencia" type="text" class="form-control" />
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="numeroResidencia">Número:</label>
                                                    <input id="numeroResidencia" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="complementoResidencia">Complemento:</label>
                                                    <input id="complementoResidencia" type="text" class="form-control" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="bairroResidencia">Bairro:</label>
                                                    <input id="bairroResidencia" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="cidadeResidencia">Cidade:</label>
                                                    <input id="cidadeResidencia" type="text" class="form-control" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="ufResidencia">Uf:</label>
                                                    @Html.DropDownList("ufResidencia", new SelectList(ViewBag.Estado, "Uf", "Nome"), "Uf", new { @class = "form-control" })
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label for="tipoResidencia">Tipo Residência:</label>
                                                    @Html.DropDownList("tipoResidencia", new SelectList(ViewBag.TipoResidencia, "Id", "Nome"), "Tipo Residência", new { @class = "form-control" })
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="valorAluguel">Valor Aluguel:</label>
                                                    <input id="valorAluguel" type="text" class="form-control valor" />
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="tempoResidencial">Tempo na Residência:</label>
                                                    <input id="tempoResidencial" type="text" class="form-control ano" placeholder="Meses" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="profissao">Profissão:</label>
                                                    <input id="profissao" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="empresaTrabalho">Empresa Trabalho:</label>
                                                    <input id="empresaTrabalho" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-4">
                                                    <label for="cargo">Cargo:</label>
                                                    <input id="cargo" type="text" class="form-control" />
                                                </div>
                                                <div class="col-md-2">
                                                    <label for="dataAdmissao">Data Admissão:</label>
                                                    <input id="dataAdmissao" type="text" class="form-control data datepicker" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label for="valorSalario">Valor Salário:</label>
                                                    <input id="valorSalario" type="text" class="form-control valor" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="dataReferenciaSalario">Data Referência Salário:</label>
                                                    <input id="dataReferenciaSalario" type="text" class="form-control data datepicker" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-6">
                                                    <label for="empresaPessoal">Empresa Pessoal:</label>
                                                    <input id="empresaPessoal" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-3">
                                                    <label for="telefoneEmpresa">Telefone Empresa:</label>
                                                    <input id="telefoneEmpresa" type="text" class="form-control celularDDD" />
                                                </div>
                                                <div class="col-md-3">
                                                    <label for="emailEmpresa">E-mail Empresa:</label>
                                                    <input id="emailEmpresa" type="text" class="form-control" />
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="avalistas" role="tabpanel" aria-labelledby="avalistas-tab">
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-12 text-right">
                                                <input id="btnAdicionarPessoaAvalista" type="button" class="btn" value="Adicionar Avalista" />
                                            </div>
                                        </div>
                                    </div>
                                    <div id="divAvalista" class="form-group rolagem-vertical">
                                    </div>
                                </div>
                                <div class="tab-pane" id="contato" role="tabpanel" aria-labelledby="contato-tab">
                                    <div class="rolagem-vertical">
                                        <h4>Telefones</h4>
                                        <hr />
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-12 text-right">
                                                    <input id="btnAdicionarPessoaTelefone" type="button" class="btn" value="Adicionar Telefone" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="table-responsive">
                                                <table id="tbPessoaTelefone" class="table nowrap" style="width: 100%">
                                                    <thead>
                                                        <tr>
                                                            <td class="text-center" style="width: 5%"><b>Id</b></td>
                                                            <td class="text-center" style="width: 5%"><b>País</b></td>
                                                            <td class="text-center" style="width: 5%"><b>DDD</b></td>
                                                            <td class="text-center" style="width: 20%"><b>Número</b></td>
                                                            <td class="text-center" style="width: 50%"><b>Nome do Contato</b></td>
                                                            <td class="text-center" style="width: 15%"><b>Tipo Telefone</b></td>
                                                            <td class="text-center" style="width: 5%"><b>Ação</b></td>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>
                                        <h4>E-mails</h4>
                                        <hr />
                                        <div class="form-group">
                                            <div class="row">
                                                <div class="col-md-12 text-right">
                                                    <input id="btnAdicionarPessoaEmail" type="button" class="btn" value="Adicionar Email" />
                                                </div>
                                            </div>
                                        </div>
                                        <div class="form-group">
                                            <div class="table-responsive">
                                                <table id="tbPessoaEmail" class="table nowrap" style="width: 100%">
                                                    <thead>
                                                        <tr>
                                                            <td class="text-center" style="width: 5%"><b>Id</b></td>
                                                            <td class="text-center" style="width: 45%"><b>E-mail</b></td>
                                                            <td class="text-center" style="width: 50%"><b>Nome do Contato</b></td>
                                                            <td class="text-center" style="width: 5%"><b>Ação</b></td>
                                                        </tr>
                                                    </thead>
                                                    <tbody></tbody>
                                                </table>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="referencias" role="tabpanel" aria-labelledby="referencias-tab">
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-12 text-right">
                                                <input id="btnAdicionarPessoaReferencia" type="button" class="btn" value="Adicionar Referência" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="table-responsive rolagem-vertical">
                                            <table id="tbPessoaReferencia" class="table nowrap" style="width: 100%">
                                                <thead>
                                                    <tr>
                                                        <td class="text-center"><b>Id</b></td>
                                                        <td class="text-center"><b>Data Referência</b></td>
                                                        <td class="text-center"><b>Tipo Referência</b></td>
                                                        <td class="text-center"><b>Telefone</b></td>
                                                        <td class="text-center"><b>Nome</b></td>
                                                        <td class="text-center"><b>Descrição</b></td>
                                                        <td class="text-center"><b>Ação</b></td>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="historico" role="tabpanel" aria-labelledby="historico-tab">
                                    <div class="form-group">
                                        <div class="row">
                                            <div class="col-md-12 text-right">
                                                <input id="btnAdicionarPessoaHistorico" type="button" class="btn" value="Adicionar Histórico" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="form-group">
                                        <div class="table-responsive rolagem-vertical">
                                            <table id="tbPessoaHistorico" class="table nowrap" style="width: 100%">
                                                <thead>
                                                    <tr>
                                                        <td class="text-center"><b>Id</b></td>
                                                        <td class="text-center"><b>Data Histórico</b></td>
                                                        <td class="text-center"><b>Descrição</b></td>
                                                        <td class="text-center"><b>Ação</b></td>
                                                    </tr>
                                                </thead>
                                                <tbody></tbody>
                                            </table>
                                        </div>
                                    </div>
                                </div>
                                <div class="tab-pane" id="contratos" role="tabpanel" aria-labelledby="contratos-tab">
                                    <div class="table-responsive rolagem-vertical">
                                        <table id="tbPessoaContrato" class="table nowrap" style="width: 100%">
                                            <thead>
                                                <tr>
                                                    <td class="text-center" style="width: 10%"><b>Número Contrato</b></td>
                                                    <td class="text-center" style="width: 15%"><b>Cliente</b></td>
                                                    <td class="text-center" style="width: 15%"><b>Placa</b></td>
                                                    <td class="text-center" style="width: 15%"><b>Modelo</b></td>
                                                    <td class="text-center" style="width: 15%"><b>Data Contrato</b></td>
                                                    <td class="text-center" style="width: 15%"><b>Valor Financiado</b></td>
                                                    <td class="text-center" style="width: 15%"><b>Situação Contrato</b></td>
                                                </tr>
                                            </thead>
                                            <tbody></tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <input id="btnIncluir" type="button" class="btn btn-primary" value="Incluir" />
                <input id="btnAlterar" type="button" class="btn btn-warning" value="Alterar" />
            </div>
        </div>
    </div>
</div>

@Html.Partial("_PessoaCadastroAuxiliar")
@Html.Partial("_PessoaCadastroAvalista")